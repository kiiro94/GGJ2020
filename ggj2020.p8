pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
--main


printh("---------------------")


--Screen from 0 to 127
--Data   from 1 to 128

function makePoint(x, y, col)
   return {
	  x = x,
	  y = y,
	  c = col
   }
end

function getStruct()
   cls()
   spr(1, 32, 32, 4, 4)
   struct = {}
   for j=0,127 do
	  for i=0,127 do
		 if pget(i,j)!=0 then
			add(struct, makePoint(i, j, 6))
		 end
	  end
   end
   cls()
   return struct
end


function drawPoint(p)
   pset(p.x, p.y, p.c)
end

function drawStruct()
   foreach(data, drawPoint)
end


function printData()
   for j=1,32 do
	  s = ""
	  for i=1,128 do
		 s1 = "0"
		 if (data[j][i]==6) s1 = "."
		 s = s .. s1
	  end
	  printh(s)
   end
end



--------------------------------




function _init()
	data = getStruct()
	t = 0
	pset(127,0,8)
end



function _update60()
   t += 0.01
end





function _draw()
   cls()
   drawStruct()

   circ(64+sin(t)*8, 64, 2, 6)

   print("Mem :"..stat(0), 0,  0, 8)
   print("Cpu1:"..stat(1), 0,  8, 8)
   print("Cpu2:"..stat(2), 0, 16, 8)
   print("Fps :"..stat(7), 0, 24, 8)
end




--cose
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000006666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700006666060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006006006600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006006000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000606000066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000066000006666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000006600000000666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000006066000000000666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000660006006000000006660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000600006060666006600066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006600006666060006600006600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000600006660060666006600666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000060000600066006006666600066600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000006600000660006660666060000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000660000000006600606660006600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000060000000666000000000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000006600000600000000066600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000600000666000006660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000006600000600000066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000006660660006000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066666006606660000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000600000660066666000006600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000060000006606600006660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000060000006660000666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006666600000066600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000066666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
